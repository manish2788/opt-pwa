<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Class: PersistenceStore</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script>
      window.onload = function() {
        var nav = document.getElementById("nav")
        var currentId = nav.getAttribute("data-current-item");
        if (!currentId) return;
        var link = document.getElementById(currentId);
        if (!link) return;
        link.className = link.className ? link.className + " current-nav-item" : "current-nav-item";
        nav.scrollTop = link.offsetTop + (link.offsetHeight - nav.offsetHeight)/2;
      }
    </script>

    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>


<nav id="nav" data-current-item="navItem8">
    <h2 id="navIndex"><a href="index.html">Index</a></h2><h3>Classes</h3><ul class="subList"><li id="navItem0"><a href="ArrayPersistenceStoreFactory.html">ArrayPersistenceStoreFactory</a></li><li id="navItem1"><a href="ConfigurablePouchDBStoreFactory.html">ConfigurablePouchDBStoreFactory</a></li><li id="navItem2"><a href="DefaultResponseProxy.html">DefaultResponseProxy</a></li><li id="navItem3"><a href="FileSystemPersistenceStoreFactory.html">FileSystemPersistenceStoreFactory</a></li><li id="navItem4"><a href="LocalPersistenceStoreFactory.html">LocalPersistenceStoreFactory</a></li><li id="navItem5"><a href="OfflineCache.html">OfflineCache</a></li><li id="navItem6"><a href="PersistenceManager.html">PersistenceManager</a></li><li id="navItem7"><a href="PersistenceRegistration.html">PersistenceRegistration</a></li><li id="navItem8"><a href="PersistenceStore.html">PersistenceStore</a></li><li id="navItem9"><a href="PersistenceStoreFactory.html">PersistenceStoreFactory</a></li><li id="navItem10"><a href="PersistenceStoreManager.html">PersistenceStoreManager</a></li><li id="navItem11"><a href="PersistenceSyncManager.html">PersistenceSyncManager</a></li><li id="navItem12"><a href="PouchDBPersistenceStoreFactory.html">PouchDBPersistenceStoreFactory</a></li><li id="navItem13"><a href="cacheStrategies.html">cacheStrategies</a></li><li id="navItem14"><a href="fetchStrategies.html">fetchStrategies</a></li><li id="navItem15"><a href="oracleRestJsonShredding.html">oracleRestJsonShredding</a></li><li id="navItem16"><a href="persistenceUtils.html">persistenceUtils</a></li><li id="navItem17"><a href="queryHandlers.html">queryHandlers</a></li><li id="navItem18"><a href="simpleBinaryDataShredding.html">simpleBinaryDataShredding</a></li><li id="navItem19"><a href="simpleJsonShredding.html">simpleJsonShredding</a></li></ul><h3>Interfaces</h3><ul class="subList"><li id="navItem20"><a href="AttributeFilter.html">AttributeFilter</a></li><li id="navItem21"><a href="CompoundFilter.html">CompoundFilter</a></li><li id="navItem22"><a href="DataMapping.html">DataMapping</a></li><li id="navItem23"><a href="Item.html">Item</a></li><li id="navItem24"><a href="ItemMetadata.html">ItemMetadata</a></li><li id="navItem25"><a href="NormalizedQuery.html">NormalizedQuery</a></li></ul>
</nav>

<div id="main">
    <h1 class="page-title">Class: PersistenceStore</h1>

    
    <p class="product-docs-header">

    










<section id="quick-nav">
    <header><h2>QuickNav</h2></header>
    

    

    

    
    <div class="quick-nav-section1">
        <h3><a href="#methods-section">Methods</a></h3>
        <ul class="subList">
            
                <li><a href="#delete">delete</a></li>
            
                <li><a href="#find">find</a></li>
            
                <li><a href="#findByKey">findByKey</a></li>
            
                <li><a href="#getName">getName</a></li>
            
                <li><a href="#getVersion">getVersion</a></li>
            
                <li><a href="#Init">Init</a></li>
            
                <li><a href="#keys">keys</a></li>
            
                <li><a href="#removeByKey">removeByKey</a></li>
            
                <li><a href="#updateKey">updateKey</a></li>
            
                <li><a href="#upsert">upsert</a></li>
            
                <li><a href="#upsertAll">upsertAll</a></li>
            
        </ul>
        
    </div>
    
    
</section>

<section>
<header>
  
  
    <h2>
    PersistenceStore
    
    
    </h2>
  

  <dl class="details">

      
      
  </dl>

  
  

  
    <div class="class-description">Abstract class that all Persistence Store implmenetation extends
           from. Defines the basic operations every persistence store should
           support.</div>
  
</header>


<article>
    <div class="container-overview">
    

    
        
<dt>
        
    
    
        
    

    
</dt>
<dd>
    
    

    
    
    
    
    
    
    
  <dl class="details">
    

    

    

    

    
    

    

    


    

    

    

    

    

    

    
</dl>

    
    
    
    
    
    
    
    
</dd>

    
    </div>

    

    

    

    

    

    

    
    
    

    

    
        
        <h3 id="methods-section" class="subsection-title">
            Methods
            <a class="bookmarkable-link" title="Bookmarkable Link" href="#methods-section"></a>
        </h3>

        <dl>
            
                
<dt>
        
    
        
      <h4 id="delete" class="name">
        <span class="type-signature"></span>delete<span class="signature">(findExpression)</span><span class="type-signature"></span>
        <a class="bookmarkable-link" title="Bookmarkable Link" href="#delete"></a>
      </h4>
    
        
    

    
</dt>
<dd>
    
    
    <div class="description">
        Delete the keys that satisfy the findExpression.
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		        
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>findExpression</code></td>
            
            
            <td class="type">
            
                    
      <span class="param-type">{selector: Object}</span>
    
                                   
                
            </td>
            
            
            
                                                           
            <td class="description last">The expression to find matching documents to delete.
                               The syntax of the expression follows standard
                               MangoDB syntax. If undefined, all documents in this
                               store will be deleted.
<ul>
<li>findExpression.selector The search criteria to find matching
                                        document.</li>
</ul>
            </td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
  <dl class="details">
    

    

    

    

    
    

    

    


    

    

    

    

    

    

    
</dl>

    
    
    
    
    
    
    
    
</dd>

            
                
<dt>
        
    
        
      <h4 id="find" class="name">
        <span class="type-signature"></span>find<span class="signature">(findExpression)</span><span class="type-signature"> &rarr; {Promise}</span>
        <a class="bookmarkable-link" title="Bookmarkable Link" href="#find"></a>
      </h4>
    
        
    

    
</dt>
<dd>
    
    
    <div class="description">
        This is query and sort support for persistence store.
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		        
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>findExpression</code></td>
            
            
            <td class="type">
            
                    
      <span class="param-type">{selector: Object, fields: Object, sort: Object}</span>
    
                                   
                
            </td>
            
            
            
                                                           
            <td class="description last">The expression to query/sort the store. The syntax
                               of the expression follows standard MangoDB syntax.
<ul>
<li>findExpression.selector search criteria</li>
<li>findExpression.fields lists of fields to be included in the return
                                      value</li>
<li>findExpression.sort name of the field to be sorted against and the
                                    order to sort with.</li>
</ul>
            </td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
  <dl class="details">
    

    

    

    

    
    

    

    


    

    

    

    

    

    

    
</dl>

    
    
    
    
    
    
        <h5>Returns:</h5>
        
                
<div class="param-desc">
    Returns a Promise that resolves to an array of entries that
                          satisfy the selector expression in the specified sorted
                          order that contains the specified fields. The
                          promise should resolve to an emtpy array if no
                          entries are found.
</div>


                
    <dl>
      <dt>
        Type
      </dt>
      <dd>
        
      <span class="param-type">Promise</span>
    

      </dd>
    </dl>
 

            
    
    
</dd>

            
                
<dt>
        
    
        
      <h4 id="findByKey" class="name">
        <span class="type-signature"></span>findByKey<span class="signature">(key)</span><span class="type-signature"> &rarr; {Promise}</span>
        <a class="bookmarkable-link" title="Bookmarkable Link" href="#findByKey"></a>
      </h4>
    
        
    

    
</dt>
<dd>
    
    
    <div class="description">
        Convenient method to retrieve the document with the specified key. This is
equivalent to
find({selector: {key: {$eq: keyValue}},
           fields: [value]});
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		        
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>key</code></td>
            
            
            <td class="type">
            
                
      <span class="param-type">string</span>
    

            
            </td>
            
            
            
                                                           
            <td class="description last">The key part of the composite key in the store to
                    search for store entry.
            </td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
  <dl class="details">
    

    

    

    

    
    

    

    


    

    

    

    

    

    

    
</dl>

    
    
    
    
    
    
        <h5>Returns:</h5>
        
                
<div class="param-desc">
    Returns a Promise that resolves to the store entry
                  identified by the specified key
</div>


                
    <dl>
      <dt>
        Type
      </dt>
      <dd>
        
      <span class="param-type">Promise</span>
    

      </dd>
    </dl>
 

            
    
    
</dd>

            
                
<dt>
        
    
        
      <h4 id="getName" class="name">
        <span class="type-signature"></span>getName<span class="signature">()</span><span class="type-signature"> &rarr; {string}</span>
        <a class="bookmarkable-link" title="Bookmarkable Link" href="#getName"></a>
      </h4>
    
        
    

    
</dt>
<dd>
    
    
    <div class="description">
        Retrieves the name of the store.
    </div>
    

    
    
    
    
    
    
    
  <dl class="details">
    

    

    

    

    
    

    

    


    

    

    

    

    

    

    
</dl>

    
    
    
    
    
    
        <h5>Returns:</h5>
        
                
<div class="param-desc">
    Returns the name of this store.
</div>


                
    <dl>
      <dt>
        Type
      </dt>
      <dd>
        
      <span class="param-type">string</span>
    

      </dd>
    </dl>
 

            
    
    
</dd>

            
                
<dt>
        
    
        
      <h4 id="getVersion" class="name">
        <span class="type-signature"></span>getVersion<span class="signature">()</span><span class="type-signature"> &rarr; {string}</span>
        <a class="bookmarkable-link" title="Bookmarkable Link" href="#getVersion"></a>
      </h4>
    
        
    

    
</dt>
<dd>
    
    
    <div class="description">
        Retrieves the version of the store.
    </div>
    

    
    
    
    
    
    
    
  <dl class="details">
    

    

    

    

    
    

    

    


    

    

    

    

    

    

    
</dl>

    
    
    
    
    
    
        <h5>Returns:</h5>
        
                
<div class="param-desc">
    Returns the version of this store.
</div>


                
    <dl>
      <dt>
        Type
      </dt>
      <dd>
        
      <span class="param-type">string</span>
    

      </dd>
    </dl>
 

            
    
    
</dd>

            
                
<dt>
        
    
        
      <h4 id="Init" class="name">
        <span class="type-signature"></span>Init<span class="signature">(options)</span><span class="type-signature"> &rarr; {Promise}</span>
        <a class="bookmarkable-link" title="Bookmarkable Link" href="#Init"></a>
      </h4>
    
        
    

    
</dt>
<dd>
    
    
    <div class="description">
        Initializes the store.
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		        
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>options</code></td>
            
            
            <td class="type">
            
                    
      <span class="param-type">{index: Array, version: string}</span>
    
                                   
                
            </td>
            
            
            
                                                           
            <td class="description last">Optional options to tune the store. 
<ul>
<li>options.index   array of fields to create index for</li>
<li>options.version The version of the store.</li>
</ul>
            </td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
  <dl class="details">
    

    

    

    

    
    

    

    


    

    

    

    

    

    

    
</dl>

    
    
    
    
    
    
        <h5>Returns:</h5>
        
                
<div class="param-desc">
    Returns a Promise when resolved the store is ready to be used.
</div>


                
    <dl>
      <dt>
        Type
      </dt>
      <dd>
        
      <span class="param-type">Promise</span>
    

      </dd>
    </dl>
 

            
    
    
</dd>

            
                
<dt>
        
    
        
      <h4 id="keys" class="name">
        <span class="type-signature"></span>keys<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span>
        <a class="bookmarkable-link" title="Bookmarkable Link" href="#keys"></a>
      </h4>
    
        
    

    
</dt>
<dd>
    
    
    <div class="description">
        Returns all the keys of the documents in this store.
    </div>
    

    
    
    
    
    
    
    
  <dl class="details">
    

    

    

    

    
    

    

    


    

    

    

    

    

    

    
</dl>

    
    
    
    
    
    
        <h5>Returns:</h5>
        
                
<div class="param-desc">
    Returns a Promise that resolves to an array where each
                          element is the key of an entry in this store.
                          The Promise should resolve to an empty array if
                          there is no entries in the store.
</div>


                
    <dl>
      <dt>
        Type
      </dt>
      <dd>
        
      <span class="param-type">Promise</span>
    

      </dd>
    </dl>
 

            
    
    
</dd>

            
                
<dt>
        
    
        
      <h4 id="removeByKey" class="name">
        <span class="type-signature"></span>removeByKey<span class="signature">(key)</span><span class="type-signature"> &rarr; {Promise}</span>
        <a class="bookmarkable-link" title="Bookmarkable Link" href="#removeByKey"></a>
      </h4>
    
        
    

    
</dt>
<dd>
    
    
    <div class="description">
        Convenient method to delete a document identified by the specified key.
This is equivalent to
  delete({selector: {key: {$eq: keyValue}}});
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		        
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>key</code></td>
            
            
            <td class="type">
            
                
      <span class="param-type">string</span>
    

            
            </td>
            
            
            
                                                           
            <td class="description last">The key to identify the store entry that needs to be deleted.
            </td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
  <dl class="details">
    

    

    

    

    
    

    

    


    

    

    

    

    

    

    
</dl>

    
    
    
    
    
    
        <h5>Returns:</h5>
        
                
<div class="param-desc">
    Returns a Promise that is resolved when the store entry
                  is deleted.
</div>


                
    <dl>
      <dt>
        Type
      </dt>
      <dd>
        
      <span class="param-type">Promise</span>
    

      </dd>
    </dl>
 

            
    
    
</dd>

            
                
<dt>
        
    
        
      <h4 id="updateKey" class="name">
        <span class="type-signature"></span>updateKey<span class="signature">(currentKey, newKey)</span><span class="type-signature"> &rarr; {Promise}</span>
        <a class="bookmarkable-link" title="Bookmarkable Link" href="#updateKey"></a>
      </h4>
    
        
    

    
</dt>
<dd>
    
    
    <div class="description">
        Update the key value for the row referenced by the current key value.
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		        
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>currentKey</code></td>
            
            
            <td class="type">
            
                
      <span class="param-type">string</span>
    

            
            </td>
            
            
            
                                                           
            <td class="description last">The current key used to identify this resource
            </td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>newKey</code></td>
            
            
            <td class="type">
            
                
      <span class="param-type">string</span>
    

            
            </td>
            
            
            
                                                           
            <td class="description last">The new key used to identify this resource
            </td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
  <dl class="details">
    

    

    

    

    
    

    

    


    

    

    

    

    

    

    
</dl>

    
    
    
    
    
    
        <h5>Returns:</h5>
        
                
<div class="param-desc">
    Returns a Promise that resolves when the key is updated.
</div>


                
    <dl>
      <dt>
        Type
      </dt>
      <dd>
        
      <span class="param-type">Promise</span>
    

      </dd>
    </dl>
 

            
    
    
</dd>

            
                
<dt>
        
    
        
      <h4 id="upsert" class="name">
        <span class="type-signature"></span>upsert<span class="signature">(key, metadata, value, expectedVersionIdentifier)</span><span class="type-signature"> &rarr; {Promise}</span>
        <a class="bookmarkable-link" title="Bookmarkable Link" href="#upsert"></a>
      </h4>
    
        
    

    
</dt>
<dd>
    
    
    <div class="description">
        Insert a resource if it does not already exist, update otherwise.
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		        
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>key</code></td>
            
            
            <td class="type">
            
                
      <span class="param-type">string</span>
    

            
            </td>
            
            
            
                                                           
            <td class="description last">The unique key used to identify this resource
            </td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>metadata</code></td>
            
            
            <td class="type">
            
                
      <span class="param-type">Object</span>
    

            
            </td>
            
            
            
                                                           
            <td class="description last">The metadata portion of this resource
            </td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>value</code></td>
            
            
            <td class="type">
            
                
      <span class="param-type">Object</span>
    

            
            </td>
            
            
            
                                                           
            <td class="description last">The value portion of this resource
            </td>
        </tr>
	
	
	
        <tr>
            
                <td class="name"><code>expectedVersionIdentifier</code></td>
            
            
            <td class="type">
            
                
      <span class="param-type">string</span>
    

            
            </td>
            
            
            
                                                           
            <td class="description last">Optional, the new version 
                                          identifier value of this resource.
            </td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
  <dl class="details">
    

    

    

    

    
    

    

    


    

    

    

    

    

    

    
</dl>

    
    
    
    
    
    
        <h5>Returns:</h5>
        
                
<div class="param-desc">
    Returns a Promise that for insert, resolves to undefined,
                  while for update, resolves to the old value of the resource
                  associated with the key.
</div>


                
    <dl>
      <dt>
        Type
      </dt>
      <dd>
        
      <span class="param-type">Promise</span>
    

      </dd>
    </dl>
 

            
    
    
</dd>

            
                
<dt>
        
    
        
      <h4 id="upsertAll" class="name">
        <span class="type-signature"></span>upsertAll<span class="signature">(values)</span><span class="type-signature"> &rarr; {Promise}</span>
        <a class="bookmarkable-link" title="Bookmarkable Link" href="#upsertAll"></a>
      </h4>
    
        
    

    
</dt>
<dd>
    
    
    <div class="description">
        Bulk operation of upsert.
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		        
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>values</code></td>
            
            
            <td class="type">
            
                
      <span class="param-type">Array</span>
    

            
            </td>
            
            
            
                                                           
            <td class="description last">An array of document to be bulk operated. Each item in the
                      array is of {key, metadata, value, expectedVersionIdentifier} format.
            </td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
  <dl class="details">
    

    

    

    

    
    

    

    


    

    

    

    

    

    

    
</dl>

    
    
    
    
    
    
        <h5>Returns:</h5>
        
                
<div class="param-desc">
    Returns a Promise that resolves to an array where each element
                          in the array is the status of upsert of the corresponding
                          resource.
</div>


                
    <dl>
      <dt>
        Type
      </dt>
      <dd>
        
      <span class="param-type">Promise</span>
    

      </dd>
    </dl>
 

            
    
    
</dd>

            
        </dl>
    

    

    

</article>


</section>




    <footer>
        Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a> on Tue Nov 02 2021 17:26:33 GMT-0700 (Pacific Daylight Time)<br>
        <span class="product-docs-footer">Copyright © 2017, 2021
        Oracle and/or its affiliates The Universal Permissive License (UPL), Version 1.0.<span>
    </footer>
</div>

<script> prettyPrint(); </script>
</body>
</html>