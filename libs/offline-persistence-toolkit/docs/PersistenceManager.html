<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Class: PersistenceManager</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script>
      window.onload = function() {
        var nav = document.getElementById("nav")
        var currentId = nav.getAttribute("data-current-item");
        if (!currentId) return;
        var link = document.getElementById(currentId);
        if (!link) return;
        link.className = link.className ? link.className + " current-nav-item" : "current-nav-item";
        nav.scrollTop = link.offsetTop + (link.offsetHeight - nav.offsetHeight)/2;
      }
    </script>

    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>


<nav id="nav" data-current-item="navItem6">
    <h2 id="navIndex"><a href="index.html">Index</a></h2><h3>Classes</h3><ul class="subList"><li id="navItem0"><a href="ArrayPersistenceStoreFactory.html">ArrayPersistenceStoreFactory</a></li><li id="navItem1"><a href="ConfigurablePouchDBStoreFactory.html">ConfigurablePouchDBStoreFactory</a></li><li id="navItem2"><a href="DefaultResponseProxy.html">DefaultResponseProxy</a></li><li id="navItem3"><a href="FileSystemPersistenceStoreFactory.html">FileSystemPersistenceStoreFactory</a></li><li id="navItem4"><a href="LocalPersistenceStoreFactory.html">LocalPersistenceStoreFactory</a></li><li id="navItem5"><a href="OfflineCache.html">OfflineCache</a></li><li id="navItem6"><a href="PersistenceManager.html">PersistenceManager</a></li><li id="navItem7"><a href="PersistenceRegistration.html">PersistenceRegistration</a></li><li id="navItem8"><a href="PersistenceStore.html">PersistenceStore</a></li><li id="navItem9"><a href="PersistenceStoreFactory.html">PersistenceStoreFactory</a></li><li id="navItem10"><a href="PersistenceStoreManager.html">PersistenceStoreManager</a></li><li id="navItem11"><a href="PersistenceSyncManager.html">PersistenceSyncManager</a></li><li id="navItem12"><a href="PouchDBPersistenceStoreFactory.html">PouchDBPersistenceStoreFactory</a></li><li id="navItem13"><a href="cacheStrategies.html">cacheStrategies</a></li><li id="navItem14"><a href="fetchStrategies.html">fetchStrategies</a></li><li id="navItem15"><a href="oracleRestJsonShredding.html">oracleRestJsonShredding</a></li><li id="navItem16"><a href="persistenceUtils.html">persistenceUtils</a></li><li id="navItem17"><a href="queryHandlers.html">queryHandlers</a></li><li id="navItem18"><a href="simpleBinaryDataShredding.html">simpleBinaryDataShredding</a></li><li id="navItem19"><a href="simpleJsonShredding.html">simpleJsonShredding</a></li></ul><h3>Interfaces</h3><ul class="subList"><li id="navItem20"><a href="AttributeFilter.html">AttributeFilter</a></li><li id="navItem21"><a href="CompoundFilter.html">CompoundFilter</a></li><li id="navItem22"><a href="DataMapping.html">DataMapping</a></li><li id="navItem23"><a href="Item.html">Item</a></li><li id="navItem24"><a href="ItemMetadata.html">ItemMetadata</a></li><li id="navItem25"><a href="NormalizedQuery.html">NormalizedQuery</a></li></ul>
</nav>

<div id="main">
    <h1 class="page-title">Class: PersistenceManager</h1>

    
    <p class="product-docs-header">

    










<section id="quick-nav">
    <header><h2>QuickNav</h2></header>
    

    

    

    
    <div class="quick-nav-section1">
        <h3><a href="#methods-section">Methods</a></h3>
        <ul class="subList">
            
                <li><a href="#browserFetch">browserFetch</a></li>
            
                <li><a href="#forceOffline">forceOffline</a></li>
            
                <li><a href="#getCache">getCache</a></li>
            
                <li><a href="#getRegistration">getRegistration</a></li>
            
                <li><a href="#getRegistrations">getRegistrations</a></li>
            
                <li><a href="#getSyncManager">getSyncManager</a></li>
            
                <li><a href="#init">init</a></li>
            
                <li><a href="#isOnline">isOnline</a></li>
            
                <li><a href="#register">register</a></li>
            
        </ul>
        
    </div>
    
    
</section>

<section>
<header>
  
  
    <h2>
    PersistenceManager
    
    
    </h2>
  

  <dl class="details">

      
      
  </dl>

  
  

  
    <div class="class-description">PersistenceManager is used for offline support by acting as
the interface between the application, webservice, and the the Offline Persistence Toolkit.
The PersistenceManger is where the endpoints are registered/unregistered for Offline Persistence Toolkit.
In order to use PersistenceManager, a default story factory must be registered using
<a href="PersistenceStoreManager.html#registerDefaultStoreFactory">registerDefaultStoreFactory</a> before
initializing PersistenceManager. PersistenceManager is not needed when Offline Persistence Toolkit
is operating in <a href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API%20">ServiceWorker</a>
Mode. Please see Concept section for more infomation.
<br />
<br />
PersistenceManager should be <a href="PersistenceManager.html#init">initialized</a> prior to using any of the other methods.</div>
  
</header>


<article>
    <div class="container-overview">
    

    
        
<dt>
        
    
    
        
    

    
</dt>
<dd>
    
    

    
    
    
    
    
    
    
  <dl class="details">
    

    

    

    

    
    

    

    


    

    

    

    

    

    

    
</dl>

    
    
    
    
    
    
    
    
</dd>

    
    </div>

    

    

    

    

    

    

    
    
    

    

    
        
        <h3 id="methods-section" class="subsection-title">
            Methods
            <a class="bookmarkable-link" title="Bookmarkable Link" href="#methods-section"></a>
        </h3>

        <dl>
            
                
<dt>
        
    
        
      <h4 id="browserFetch" class="name">
        <span class="type-signature"></span>browserFetch<span class="signature">(request)</span><span class="type-signature"> &rarr; {Promise.&lt;Response>}</span>
        <a class="bookmarkable-link" title="Bookmarkable Link" href="#browserFetch"></a>
      </h4>
    
        
    

    
</dt>
<dd>
    
    
    <div class="description">
        Call fetch API
without going through the persistence framework. This is the
unproxied browser provided fetch API.
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		        
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>request</code></td>
            
            
            <td class="type">
            
                
      <span class="param-type">String</span>
    |

      <span class="param-type">Request</span>
    

            
            </td>
            
            
            
                                                           
            <td class="description last">A USVString containing the direct URL of the
resource you want to fetch or a Request object.
            </td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
  <dl class="details">
    

    

    

    

    
    

    

    


    

    

    

    

    

    
        <dt class="tag-see">See:</dt>
        <dd class="tag-see">
            <ul>
                <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API%20"> FetchAPI MDN</a></li>
            </ul>
        </dd>
    

    
</dl>

    
    
    
    
    
    
        <h5>Returns:</h5>
        
                
<div class="param-desc">
    Resolves to the Response when complete
</div>


                
    <dl>
      <dt>
        Type
      </dt>
      <dd>
        
      <span class="param-type">Promise.&lt;Response></span>
    

      </dd>
    </dl>
 

            
    
    
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>PersistenceManager.browserFetch('https://www.oracle.com/').then(function(response){
// Your Code Here
});</code></pre>

    
</dd>

            
                
<dt>
        
    
        
      <h4 id="forceOffline" class="name">
        <span class="type-signature"></span>forceOffline<span class="signature">(offline)</span><span class="type-signature"></span>
        <a class="bookmarkable-link" title="Bookmarkable Link" href="#forceOffline"></a>
      </h4>
    
        
    

    
</dt>
<dd>
    
    
    <div class="description">
        Force the PersistenceManager to go offline regardless of the browsers actual network status.
This function should be used if the user wants the application to function in offline mode.
When <a href="PersistenceManager.html#isOnline">PersistenceManager.isOnline()</a> is called, it will
return false is forceOffline is set to true.
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		        
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>offline</code></td>
            
            
            <td class="type">
            
                
      <span class="param-type">boolean</span>
    

            
            </td>
            
            
            
                                                           
            <td class="description last">If true, sets the PersistenceManager offline
            </td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
  <dl class="details">
    

    

    

    

    
    

    

    


    

    

    

    

    

    

    
</dl>

    
    
    
    
    
    
    
    
        <h5>Examples</h5>
        
        <p class="code-caption">Toggle Force Offline to true</p>
    
    <pre class="prettyprint"><code>PersistenceManager.forceOffline(true)</code></pre>

        <p class="code-caption">Toggle Force Offline to false</p>
    
    <pre class="prettyprint"><code>PersistenceManager.forceOffline(false)</code></pre>

    
</dd>

            
                
<dt>
        
    
        
      <h4 id="getCache" class="name">
        <span class="type-signature"></span>getCache<span class="signature">()</span><span class="type-signature"> &rarr; {<a href="OfflineCache.html">OfflineCache</a>}</span>
        <a class="bookmarkable-link" title="Bookmarkable Link" href="#getCache"></a>
      </h4>
    
        
    

    
</dt>
<dd>
    
    
    <div class="description">
        PersistenceManager.getCache returns the Offline Persistence Toolkit implementation of the standard Cache API.
In additional to functionalities provided by the standard Cache API, this OfflineCache also interacts with
shredding methods for more fine-grain caching and allows for a clear() function to remove the clear the cache.
    </div>
    

    
    
    
    
    
    
    
  <dl class="details">
    

    

    

    

    
    

    

    


    

    

    

    

    

    
        <dt class="tag-see">See:</dt>
        <dd class="tag-see">
            <ul>
                <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Cache%20"> CacheAPI MDN</a></li>
            </ul>
        </dd>
    

    
</dl>

    
    
    
    
    
    
        <h5>Returns:</h5>
        
                
<div class="param-desc">
    returns the cache store for the Persistence Framework. Implements the Cache API.
</div>


                
    <dl>
      <dt>
        Type
      </dt>
      <dd>
        
      <span class="param-type"><a href="OfflineCache.html">OfflineCache</a></span>
    

      </dd>
    </dl>
 

            
    
    
        <h5>Examples</h5>
        
    <pre class="prettyprint"><code>var PersisteneCache = PersistenceManager.getCache()
PersistenceCache.[someMethod]</code></pre>

    <pre class="prettyprint"><code>PersistenceManager.getCache().[someMethod]</code></pre>

    
</dd>

            
                
<dt>
        
    
        
      <h4 id="getRegistration" class="name">
        <span class="type-signature"></span>getRegistration<span class="signature">(url)</span><span class="type-signature"> &rarr; {Promise.&lt;(<a href="PersistenceRegistration.html">PersistenceRegistration</a>|undefined)>}</span>
        <a class="bookmarkable-link" title="Bookmarkable Link" href="#getRegistration"></a>
      </h4>
    
        
    

    
</dt>
<dd>
    
    
    <div class="description">
        Return the <a href="PersistenceRegistration.html">PersistenceRegistration</a>  object for the given URL.
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		
		
		        
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>url</code></td>
            
            
            <td class="type">
            
                
      <span class="param-type">string</span>
    

            
            </td>
            
            
            
                                                           
            <td class="description last">Url
            </td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
  <dl class="details">
    

    

    

    

    
    

    

    


    

    

    

    

    

    

    
</dl>

    
    
    
    
    
    
        <h5>Returns:</h5>
        
                
<div class="param-desc">
    Returns a Promise which resolves to the
<a href="PersistenceRegistration.html">PersistenceRegistration</a> object for the URL or undefined if nothing is found.
</div>


                
    <dl>
      <dt>
        Type
      </dt>
      <dd>
        
      <span class="param-type">Promise.&lt;(<a href="PersistenceRegistration.html">PersistenceRegistration</a>|undefined)></span>
    

      </dd>
    </dl>
 

            
    
    
        <h5>Examples</h5>
        
        <p class="code-caption">Suppose a registration was registered for '/location'</p>
    
    <pre class="prettyprint"><code>PersistenceManager.getRegistration('https://www.oracle.com/location/stores').then(function(registration){
// registration will be the registration object for '/location'
});</code></pre>

        <p class="code-caption">No PersistenceRegistration is registered</p>
    
    <pre class="prettyprint"><code>PersistenceManager.getRegistration('https://www.oracle.com/doesNotExist').then(function(registration){
// registration will be undefined
});</code></pre>

    
</dd>

            
                
<dt>
        
    
        
      <h4 id="getRegistrations" class="name">
        <span class="type-signature"></span>getRegistrations<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;Array.&lt;<a href="PersistenceRegistration.html">PersistenceRegistration</a>>>}</span>
        <a class="bookmarkable-link" title="Bookmarkable Link" href="#getRegistrations"></a>
      </h4>
    
        
    

    
</dt>
<dd>
    
    
    <div class="description">
        Return an array of <a href="PersistenceRegistration.html">PersistenceRegistration</a> objects. Similar to <a href="PersistenceManager.html#register">PersistenceManager.register()</a>
when no options are passed in.
    </div>
    

    
    
    
    
    
    
    
  <dl class="details">
    

    

    

    

    
    

    

    


    

    

    

    

    

    

    
</dl>

    
    
    
    
    
    
        <h5>Returns:</h5>
        
                
<div class="param-desc">
    Returns a Promise which resolves to an array of
<a href="PersistenceRegistration.html">PersistenceRegistration</a> objects.
</div>


                
    <dl>
      <dt>
        Type
      </dt>
      <dd>
        
      <span class="param-type">Promise.&lt;Array.&lt;<a href="PersistenceRegistration.html">PersistenceRegistration</a>>></span>
    

      </dd>
    </dl>
 

            
    
    
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>PersistenceManager.getRegistrations().then(function(registrationArray){
// Your Code Here
});</code></pre>

    
</dd>

            
                
<dt>
        
    
        
      <h4 id="getSyncManager" class="name">
        <span class="type-signature"></span>getSyncManager<span class="signature">()</span><span class="type-signature"> &rarr; {<a href="PersistenceSyncManager.html">PersistenceSyncManager</a>}</span>
        <a class="bookmarkable-link" title="Bookmarkable Link" href="#getSyncManager"></a>
      </h4>
    
        
    

    
</dt>
<dd>
    
    
    <div class="description">
        getSyncManager returns the <a href="PersistenceSyncManager.html">Sync Manager</a> which is used to support synchronization capabilities for requests which were
made when offline. The PersistenceSyncManager supports operations such as retrieving the sync log, invoking the <a href="PersistenceSyncManager.html#sync">sync()</a> API
to replay the requests which were made while offline, inserting/removing requests from the sync log, adding
event listeners for sync operations, and performing undo/redo operations for the shredded local data which
were made as a result of those requests.
    </div>
    

    
    
    
    
    
    
    
  <dl class="details">
    

    

    

    

    
    

    

    


    

    

    

    

    

    

    
</dl>

    
    
    
    
    
    
        <h5>Returns:</h5>
        
                
<div class="param-desc">
    Returns the Sync Manager
</div>


                
    <dl>
      <dt>
        Type
      </dt>
      <dd>
        
      <span class="param-type"><a href="PersistenceSyncManager.html">PersistenceSyncManager</a></span>
    

      </dd>
    </dl>
 

            
    
    
        <h5>Examples</h5>
        
    <pre class="prettyprint"><code>var syncManager = PersistenceManager.getSyncManager()
syncManager.[someMethod]</code></pre>

    <pre class="prettyprint"><code>PersistenceManager.getSyncManager().[someMethod]</code></pre>

    
</dd>

            
                
<dt>
        
    
        
      <h4 id="init" class="name">
        <span class="type-signature"></span>init<span class="signature">()</span><span class="type-signature"> &rarr; {Promise}</span>
        <a class="bookmarkable-link" title="Bookmarkable Link" href="#init"></a>
      </h4>
    
        
    

    
</dt>
<dd>
    
    
    <div class="description">
        Initializes the PersistenceManager
and will return a promise once the PersistenceManager is ready.
A default story factory must be registered using
<a href="PersistenceStoreManager.html#registerDefaultStoreFactory">registerDefaultStoreFactory</a>
before initializing PersistenceManager. This method is normally called when the applciation
is first started or when a <a href="PersistenceRegistration.html">PersistenceRegistration</a> needs to be deregistered.
    </div>
    

    
    
    
    
    
    
    
  <dl class="details">
    

    

    

    

    
    

    

    


    

    

    

    

    

    

    
</dl>

    
    
    
    
    
    
        <h5>Returns:</h5>
        
                
<div class="param-desc">
    returns a Promise when resolved that this
                  PersistenceManager is fully initialized.
</div>


                
    <dl>
      <dt>
        Type
      </dt>
      <dd>
        
      <span class="param-type">Promise</span>
    

      </dd>
    </dl>
 

            
    
    
        <h5>Example</h5>
        
    <pre class="prettyprint"><code>PersistenceManager.init().then(function(){
 // Insert Your Code Here
 // sample code
 PersistenceManager.register()
});</code></pre>

    
</dd>

            
                
<dt>
        
    
        
      <h4 id="isOnline" class="name">
        <span class="type-signature"></span>isOnline<span class="signature">()</span><span class="type-signature"> &rarr; {boolean}</span>
        <a class="bookmarkable-link" title="Bookmarkable Link" href="#isOnline"></a>
      </h4>
    
        
    

    
</dt>
<dd>
    
    
    <div class="description">
        Checks if the browser is online. PersistenceManager can be forced into offline mode by setting
forceOffline to true.
<ul>
<li>Returns true if the browser AND PersistenceManager is online.</li>
<li>Returns false if the browser OR PersistenceManager is offline.</li>
</ul>
Note: To determine if the browser is online, the function will use
navigator.onLine whose behavior is browser specific. If being used
in a hybrid mobile application, please install the
<a href="https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-network-information/">Cordova Network Information Plugin</a>.
Installing the plugin will enable this function to return accurate
browser online status.
    </div>
    

    
    
    
    
    
    
    
  <dl class="details">
    

    

    

    

    
    

    

    


    

    

    

    

    

    

    
</dl>

    
    
    
    
    
    
        <h5>Returns:</h5>
        
                
<div class="param-desc">
    Returns true if online, false if not.
</div>


                
    <dl>
      <dt>
        Type
      </dt>
      <dd>
        
      <span class="param-type">boolean</span>
    

      </dd>
    </dl>
 

            
    
    
</dd>

            
                
<dt>
        
    
        
      <h4 id="register" class="name">
        <span class="type-signature"></span>register<span class="signature">(<span class="optional">options</span>)</span><span class="type-signature"> &rarr; {Promise.&lt;(<a href="PersistenceRegistration.html">PersistenceRegistration</a>|Array.&lt;<a href="PersistenceRegistration.html">PersistenceRegistration</a>>|null)>}</span>
        <a class="bookmarkable-link" title="Bookmarkable Link" href="#register"></a>
      </h4>
    
        
    

    
</dt>
<dd>
    
    
    <div class="description">
        Registers a URL endpoint for persistence storage. The scope value can also be a regular expression.
If not options are passed in, PersistenceManager.register acts similarly to <a href="PersistenceManager.html#getRegistrations">getRegistrations</a>
and will return a array of all registrations objects or null if none exist.
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params">
    <thead>
	<tr>
		
		<th>Name</th>
		
		
		<th>Type</th>
		
		
		<th>Argument</th>
		
		
		
		        
		<th class="last">Description</th>
	</tr>
	</thead>
	
	<tbody>
	
	
        <tr>
            
                <td class="name"><code>options</code></td>
            
            
            <td class="type">
            
                    
      <span class="param-type">{scope: string}</span>
    
                                   
                
            </td>
            
                <td class="attributes">
                
                    &lt;optional><br>
                
                    
                
                </td>
            
            
            
                                                           
            <td class="description last">Options to control registration
<ul>
<li>options.scope The URI which should be persisted.</li>
<li>options.scope Can also be a regular expression.</li>
</ul>
            </td>
        </tr>
	
	
	</tbody>
</table>
    
    
    
  <dl class="details">
    

    

    

    

    
    

    

    


    

    

    

    

    

    

    
</dl>

    
    
    
    
    
    
        <h5>Returns:</h5>
        
                
<div class="param-desc">
    Returns a Promise which resolves to a
<a href="PersistenceRegistration.html">PersistenceRegistration</a> object for the specified options.
If options is null, returns an array of all current <a href="PersistenceRegistration.html">PersistenceRegistration</a> objects
or null if there are none.
</div>


                
    <dl>
      <dt>
        Type
      </dt>
      <dd>
        
      <span class="param-type">Promise.&lt;(<a href="PersistenceRegistration.html">PersistenceRegistration</a>|Array.&lt;<a href="PersistenceRegistration.html">PersistenceRegistration</a>>|null)></span>
    

      </dd>
    </dl>
 

            
    
    
        <h5>Examples</h5>
        
        <p class="code-caption">String Scope</p>
    
    <pre class="prettyprint"><code>PersistenceManager.register({scope:'/location'}).then(function(registration){
// add event listeners for scope '/location'
});
PersistenceManager.register({scope:'oracle.com'}).then(function(registration){
// add event listeners for scope 'oracle.com'
});</code></pre>

        <p class="code-caption">Regular Expression Scope</p>
    
    <pre class="prettyprint"><code>PersistenceManager.register({scope:'/emp/g'}).then(function(registration){
// add event listeners for scope '/emp/'
});</code></pre>

        <p class="code-caption">No Options</p>
    
    <pre class="prettyprint"><code>PersistenceManager.register().then(function(registrationArray){
// Returns an array of registered objects
});
PersistenceManager.register().then(function(registration){
// registration is null if there are no registration objects
});</code></pre>

    
</dd>

            
        </dl>
    

    

    

</article>


</section>




    <footer>
        Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a> on Tue Nov 02 2021 17:26:33 GMT-0700 (Pacific Daylight Time)<br>
        <span class="product-docs-footer">Copyright © 2017, 2021
        Oracle and/or its affiliates The Universal Permissive License (UPL), Version 1.0.<span>
    </footer>
</div>

<script> prettyPrint(); </script>
</body>
</html>